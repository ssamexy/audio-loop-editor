<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Audio Loop Editor - ?祥蝺??唾??挾?芾摩?儐?啁毀蝧極?瘀??舀瘥怎?蝎曉漲??畾萄頛胯岫?剜?">
    <meta name="keywords" content="audio editor, loop practice, music practice, audio trimmer, segment editor">
    <title>Audio Loop Editor | ?唾??挾?芾摩?儐?啁毀蝧極??/title>
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1 data-i18n="app_title">? Audio Loop Editor</h1>
            <p class="subtitle" data-i18n="app_subtitle">?唾??挾?芾摩?儐?啁毀蝧極??- ?舀瘥怎?蝎曉漲??畾萄頛胯岫?剜</p>
            <div class="version">v1.4.9</div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- File Upload Section -->
            <section class="section file-upload-section">
                <div class="section-header-row">
                    <h2 data-i18n="select_audio">?? ?豢??唾?瑼?</h2>
                    <button id="btnPlayMain" class="btn btn-primary btn-play-main" data-i18n="play_main"
                        data-i18n-title="play_main" title="?剜銝駁閮? style="display: none;">
                        ???剜
                    </button>
                    <div class="lang-switcher">
                        <button class="lang-btn" onclick="i18n.setLang('zh-TW')">銝剜?</button>
                        <button class="lang-btn" onclick="i18n.setLang('en')">EN</button>
                    </div>
                </div>
                <div class="upload-area" id="uploadArea">
                    <input type="file" id="fileInput" accept="audio/*" hidden>
                    <div class="upload-prompt">
                        <svg class="upload-icon" viewBox="0 0 24 24" width="48" height="48">
                            <path fill="currentColor" d="M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z" />
                        </svg>
                        <p data-i18n="upload_prompt">暺????喲閮?獢甇方?</p>
                        <p class="upload-hint" data-i18n="upload_hint">?舀 MP3, WAV, OGG, M4A 蝑撘?/p>
                        <p class="upload-warning" data-i18n="memory_warning">?? ??嚗閮?獢?憭改?閮擃??刻?憭?/p>
                    </div>
                    <div class="file-info" id="fileInfo" style="display: none;">
                        <div class="file-name" id="fileName"></div>
                        <div class="file-details" id="fileDetails"></div>
                    </div>
                </div>
                <!-- Hidden audio element for playback -->
                <audio id="audioPlayer" style="display: none;"></audio>
            </section>

            <!-- Settings Section -->
            <section class="section settings-section" id="settingsSection" style="display: none;">
                <h2 data-i18n="settings">?? 閮剖?</h2>
                <div class="settings-grid">
                    <div class="setting-item">
                        <label for="stepSize" data-i18n="step_size">??敺株矽?餃漲 (蝘?:</label>
                        <input type="number" id="stepSize" value="1" min="0.1" max="10" step="0.1">
                        <div class="preset-buttons">
                            <button class="btn-preset" data-step="500">0.5s</button>
                            <button class="btn-preset" data-step="1000">1s</button>
                            <button class="btn-preset" data-step="2000">2s</button>
                        </div>
                    </div>
                    <div class="setting-item">
                        <label data-i18n="auto_split">?芸???:</label>
                        <div class="auto-split-buttons">
                            <button class="btn-split" data-segments="2">2 <span data-i18n="segments">畾?/span></button>
                            <button class="btn-split" data-segments="3">3 <span data-i18n="segments">畾?/span></button>
                            <button class="btn-split" data-segments="4">4 <span data-i18n="segments">畾?/span></button>
                            <button class="btn-split" data-segments="5">5 <span data-i18n="segments">畾?/span></button>
                            <button class="btn-split" data-segments="6">6 <span data-i18n="segments">畾?/span></button>
                            <button class="btn-split" id="btnCustomSplit" data-i18n="other">?嗡?...</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Segments Section -->
            <section class="section segments-section" id="segmentsSection" style="display: none;">
                <h2 data-i18n="segment_list">?? ?挾?”</h2>
                <div class="segments-header">
                    <div class="segment-col-id" data-i18n="id">蝺刻?</div>
                    <div class="segment-col-name" data-i18n="segment_name">畾菔?迂</div>
                    <div class="segment-col-time" data-i18n="start_time">????</div>
                    <div class="segment-col-time" data-i18n="end_time">蝯???</div>
                    <div class="segment-col-actions" data-i18n="actions">??</div>
                </div>
                <div class="segments-list" id="segmentsList">
                    <!-- Segments will be added here dynamically -->
                </div>
                <div class="segments-controls">
                    <button class="btn btn-primary" id="btnAddSegment" data-i18n="add_segment">???啣?畾菔</button>
                    <button class="btn btn-secondary" id="btnImportJSON" data-i18n="import_settings">? ?臬畾菔閮剖?</button>
                    <button class="btn btn-secondary" id="btnExportJSON" data-i18n="export_settings">? ?臬畾菔閮剖?</button>
                    <button class="btn btn-danger" id="btnClearAll" data-i18n="clear_all">?? 皜?券</button>
                </div>
            </section>

            <!-- Export Section -->
            <section class="section export-section" id="exportSection" style="display: none;">
                <h2 data-i18n="export_title">? ?臬閮剖?</h2>
                <div class="export-options">
                    <label class="checkbox-label">
                        <input type="checkbox" id="exportMp3" checked>
                        <span data-i18n="export_mp3">頛詨??MP3 (???暸? WAV)</span>
                    </label>
                    <p class="export-note" data-i18n="mp3_slow_note">? MP3 蝺函Ⅳ?閬??瑟????甇?虜??/p>
                    <label class="checkbox-label">
                        <input type="checkbox" id="downloadZip" checked>
                        <span data-i18n="download_zip">????ZIP (???暸?銝?)</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="keepOriginal" checked>
                        <span data-i18n="keep_original">??靽?摰?</span>
                    </label>
                </div>
                <div class="export-controls">
                    <button class="btn btn-success btn-large" id="btnProcess" data-i18n="start_process">
                        ? ???芾摩
                    </button>
                </div>
                <div class="progress-container" id="progressContainer" style="display: none;">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <div class="progress-text" id="progressText" data-i18n="preparing">皞?銝?..</div>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <p>
                ? <strong>Audio Loop Editor</strong> - <span data-i18n="footer_desc">撠?單?蝺渡?閮剛???畾萄頛臬極??/span>
            </p>
            <p>
                <a href="https://github.com/ssamexy/audio-loop-editor" target="_blank">GitHub</a> |
                <a href="./DISCLAIMER.md" target="_blank" data-i18n="disclaimer">?痊?脫?</a> |
                <span data-i18n="footer_privacy">?????冽?汗?其葉摰?嚗????喃遙雿?獢?/span>
            </p>
            <p>&copy; 2026 ssamexy | MIT License</p>
        </footer>
    </div>

    <!-- Floating Player Bar -->
    <div class="floating-player-bar" id="floatingPlayerBar" style="display: none;">
        <div class="floating-player-controls">
            <button id="btnPlayPause" class="btn-player" title="?剜/?怠?">??/button>
            <button id="btnLoop" class="btn-player" title="敺芰?剜">??</button>
        </div>
        <div class="floating-player-seekbar">
            <input type="range" id="seekBar" class="seek-bar" min="0" max="100" value="0">
            <div class="floating-player-time">
                <span id="currentTime">00:00</span> / <span id="totalTime">00:00</span>
            </div>
        </div>
        <div class="floating-player-speed">
            <select id="playbackSpeed" class="speed-select" title="?剜?漲">
                <option value="0.5">x0.5</option>
                <option value="0.75">x0.75</option>
                <option value="1" selected>x1</option>
                <option value="1.25">x1.25</option>
                <option value="1.5">x1.5</option>
                <option value="2">x2</option>
            </select>
        </div>
        <div class="floating-player-mode">
            <label class="floating-checkbox-label">
                <input type="checkbox" id="segmentOnlyMode" checked>
                <span data-i18n="segment_only">?挾??/span>
            </label>
        </div>
        <div class="floating-player-info" id="floatingPlayerInfo">
            銝駁閮?
        </div>
    </div>

    <!-- External Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lamejs/1.2.1/lame.min.js"></script>

    <!-- Scripts -->
    <script src="js/time-utils.js"></script>
    <script src="js/i18n.js"></script>
    <script src="js/audio-processor.js"></script>
    <script src="js/segment-manager.js"></script>
    <script src="js/ui-controller.js"></script>
    <script src="js/app.js"></script>
</body>

</html>
